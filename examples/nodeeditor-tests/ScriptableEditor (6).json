{"uuid":"8aa5106e-5957-4c05-9848-70273e31afbd","type":"ScriptableNode","metadata":{"version":4.5,"type":"Node","generator":"Node.toJSON"},"inputNodes":{"codeNode":"f55d6880-6215-4ae3-9f0e-ae6c90a8d6c7","parameters":{"B":"f7b5c4e3-795f-49cb-a690-027b1d039c3e"}},"nodes":[{"uuid":"f55d6880-6215-4ae3-9f0e-ae6c90a8d6c7","type":"CodeNode","code":"// Addition Node Example\n// THREE and TSL (Three.js Shading Language) namespaces are available!\n// Enjoy! :)\n\n// layout must be the first variable.\n\nlayout = {\n    name: \"Addition\",\n    width: 300,\n\toutputType: 'node',\n    elements: [\n        { name: 'A', inputType: 'Material' },\n\t\t{ name: 'B', inputType: 'node' }\n    ]\n};\n\n// main code must be in the output function.\n\nconst { add, float } = TSL;\n\nconst geometry = new THREE.BoxGeometry( 0.2, 0.2, 0.2 );\nconst material = new THREE.MeshNormalMaterial();\n\nconst mesh = new THREE.Mesh( geometry, material );\n\nconst initModel = ( resolve ) => {\n\n\tconst group = new THREE.Group()\n\n\tconst init = async () => {\n\n\t\tconst { FBXLoader } = await import( 'three/addons/loaders/FBXLoader.js' );\n\n\t\tconst loaderFBX = new FBXLoader();\n\t\tconst fbx = await loaderFBX.loadAsync( 'models/fbx/stanford-bunny.fbx' );\n\n\t\tconst model = fbx.children[ 0 ];\n\t\tmodel.position.set( 0, 0, .1 );\n\t\tmodel.scale.setScalar( .01 );\n\n\t\tgroup.add( model );\n\n\t\tupdateMaterial();\n\n\t};\n\n\tinit();\n\n\treturn group;\n\n};\n\nfunction updateMaterial() {\n\n\tconst group = resources.get( 'bunny' );\n\tconst mesh = group.getObjectByName( 'Stanford_Bunny' );\n\n\tconst nodeA = parameters[ 'A' ];\n\n\tif ( mesh && nodeA ) {\nconsole.log(1);\n\t\tmesh.material = nodeA;\n\n\t}\n\n\treturn group;\n\n}\n\noutput = () => {\n\n\tresources.get( 'bunny', initModel, () => {\n\t\tconsole.log(\"OK\");\n\t} );\n\t\n\treturn updateMaterial();\n\n};\n\n// other important functions.\n\n// dispose = () => {};\n","language":"js"},{"uuid":"f7b5c4e3-795f-49cb-a690-027b1d039c3e","type":"ConstNode","value":0,"valueType":"float","nodeType":"float","precision":null}]}